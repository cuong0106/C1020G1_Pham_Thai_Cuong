<!DOCTYPE html>
<html lang="en">
​
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
​
<body>
<h3>Game caro phiên bản lỗi 2</h3>
<p id="caro"></p>
<script>
    var b = document.getElementById("caro");
    var c=0;
    let mang = [];
    let data = "";
    let checkNguoiChoi = true;
    for (i = 0; i < 20; i++) {
        mang[i] = new Array("");
        for(j=0;j<20;j++) {
            mang[i][j] = "";
    }}
    function displayCaro() {
        let x;
        data = "<table border=1>";
        for (i = 0; i < 20; i++) {
            data += "<tr>";
            for (j = 0; j < 20; j++) {
                data += "<td align='center' style='width:60px;height:60px ' onclick='changeValue(" + i + "," + j + ");'><img style='width: 35px' src=";
                if(mang[i][j]==='X'){
                    data+="'pikachu.png'"}
                else if(mang[i][j]==='O'){
                    data+= "'hinh anh/ha5.png'"}
                else{
                    data+= "'hinh anh/anhtrang.png'"}
                data+="></td>";
            }
            data += "</tr>";
        }
        b.innerHTML = data;       }
    function changeValue(x, y) {
        if (checkNguoiChoi && checkDaNhap(x,y)) {
            mang[x][y] = "X";
            checkNguoiChoi = false;
            if(checkWin1()) {
                alert("người chơi 1 đã chiến thắng");
            }
        } else if(!checkNguoiChoi && checkDaNhap(x,y)){
            mang[x][y] = "O";
            checkNguoiChoi = true;
            if(checkWin2()) {
                alert("người chơi 2 đã chiến thắng");
            }

        }
        displayCaro();
    }
    function checkDaNhap(x,y) {
        if(mang[x][y]==="O"||mang[x][y]==="X") {
            alert("Ô bạn chọn đã được chọn trước. Vui lòng chọn ô khác.");
            return false;
        } else
        return true;
    }
    function checkWin1() { let kq=false;
        let i;
        for (i = 0; i < mang.length; i++){
            let j;
            for ( j = 0; j < mang[i].length; j++) {
                if(mang[i][j]==="X") {

                    if(mang[i][j+1]==="X"&&mang[i][j+2]==="X" &&mang[i][j+3]==="X"&&mang[i][j+4]==="X"&&(mang[i][j+5]!=="O"|| mang[i][j-1]!=="O")){
                        kq= true;
                    }
                    if(mang[i+1][j]==="X"&&mang[i+2][j]==="X"&&mang[i+3][j]==="X"&&mang[i+4][j]==="X"&&(mang[i+5][j]!=="O"||mang[i-1][j]!=="O")){
                        kq= true;
                    }
                    if(mang[i+1][j+1]==="X"&&mang[i+2][j+2]==="X"&&mang[i+3][j+3]==="X"&&mang[i+4][j+4]==="X"&&(mang[i-1][j-1]!=="O"||mang[i+5][j+5]!=="O")){
                        kq= true;
                    }
                    if(mang[i-1][j+1]==="X"&&mang[i-2][j+2]==="X"&&mang[i-3][j+3]==="X"&&mang[i-4][j+4]==="X"&&(mang[i+1][j-1]!=="O"||mang[i-5][j+5]!=="O")){
                        kq= true;
                    }
                }
            }
        }
        return kq;      }
    function checkWin2() {let kq=false;
        let i;
        for (i = 0; i < mang.length; i++){
            let j;
            for ( j = 0; j < mang[i].length; j++) {
                if(mang[i][j]==="O") {
                    if(mang[i][j+1]==="O"&&mang[i][j+2]==="O" &&mang[i][j+3]==="O"&&mang[i][j+4]==="O"&&(mang[i][j+5]!=="X"|| mang[i][j-1]!=="X")) {
                        kq= true;
                    }
                    if(mang[i+1][j]==="O"&&mang[i+2][j]==="O"&&mang[i+3][j]==="O"&&mang[i+4][j]==="O"&&(mang[i+5][j]!=="X"||mang[i-1][j]!=="X")) {
                        kq= true;
                    }
                    if(mang[i+1][j+1]==="O"&&mang[i+2][j+2]==="O"&&mang[i+3][j+3]==="O"&&mang[i+4][j+4]==="O"&&(mang[i-1][j-1]!=="X"||mang[i+5][j+5]!=="X")) {
                        kq= true;
                    }
                    if(mang[i-1][j+1]==="O"&&mang[i-2][j+2]==="O"&&mang[i-3][j+3]==="O"&&mang[i-4][j+4]==="O"&&(mang[i+1][j-1]!=="X"||mang[i-5][j+5]!=="X")) {
                        kq= true;
                    }
                }
            }
        }
        return kq;
    }
    displayCaro();
</script>
</body>
​
</html>