<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>yeu cau 5</title>
</head>
<body>

<script>
    let menu;
    let arrListCustomer = [];

    displayMainMenu();
    //********************************************menu chính
    function displayMainMenu() {
        menu = prompt("1. Add New Customer.\n" +
            "2. Display Information Customer.\n" +
            "3. Edit Information Customer.\n" +
            "4. Delete Customer.\n" +
            "5. Exit.\n");
        if (menu === "1") {
            addNewCustomer(arrListCustomer.length);
            displayMainMenu();
        }
        if (menu === "2") {
            displayCustomers();
        }
        if (menu === "3") {
            editCustomer();
        }
        if (menu === "4") {
            deleteCustomer();
        }
    }
    //**************************************************xoa
    function deleteCustomer() {
        let CustomersNeedToDelete;
        let confirmDelete;
        CustomersNeedToDelete = prompt(chuoiHienThiTenCMND(arrListCustomer) + (arrListCustomer.length + 1) + ". back",arrListCustomer.length+1);
        if (CustomersNeedToDelete == (arrListCustomer.length + 1)) {
            displayMainMenu();
        } else if (CustomersNeedToDelete < (arrListCustomer.length + 1)) {
            confirmDelete = prompt("bạn có chắc muốn xóa:\n1.No\n2.Yes",1);
            if(confirmDelete==="2")
            arrListCustomer.splice(CustomersNeedToDelete-1,1);
            displayMainMenu();
        }
    }
    //*************************************************menu thay đổi
    function editCustomer() {
        let displayCustomers1;
        displayCustomers1 = prompt(chuoiHienThiTenCMND(arrListCustomer) + (arrListCustomer.length + 1) + ". back",arrListCustomer.length+1);
        if (displayCustomers1 == (arrListCustomer.length + 1)) {
            displayMainMenu();
        } else if (displayCustomers1 < (arrListCustomer.length + 1)) {
            edit((displayCustomers1-1));
        }
    }
    //*********thay dổi
    function edit(location) {
        let ediwhile=1;
        let checkIdCard;
        let checkBirthDay;
        let checkEmail;
        let ip;
        while(ediwhile) {
            ip = prompt("1. Tên: " + arrListCustomer[location][0] +
                "\n2. CMND: " + arrListCustomer[location][1] +
                "\n3.Ngày Tháng Năm Sinh: " + arrListCustomer[location][2] +
                "\n4.Email: " + arrListCustomer[location][3] +
                "\n5.Địa Chỉ: " + arrListCustomer[location][4] +
                "\n6.Loại Customer: " + arrListCustomer[location][5] +
                "\n7.Giảm Giá: " + arrListCustomer[location][6] +
                "\n8. Số Lượng Đi Kèm: " + arrListCustomer[location][7] +
                "\n9. Số Ngày Thuê: " + arrListCustomer[location][8] +
                "\n10. Loại Dịch Vụ: " + arrListCustomer[location][9] +
                "\n11. Loại Phòng Thuê: " + arrListCustomer[location][10]+
                "\n12. không cần thay đổi.",12);
            switch (ip) {
                case "1":
                    do {
                        arrListCustomer[location][0]=prompt("điền vào Tên:");
                    }
                    while (arrListCustomer[location][0]==="");
                    arrListCustomer[location][0]=xuLyChuoi(arrListCustomer[location][0]);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;

                case "2":
                    do {
                        arrListCustomer[location][1]=prompt("điền vào CMND:");
                        if(arrListCustomer[location][1].length===9)
                            checkIdCard=kiemtraso(arrListCustomer[location][1]);
                    }
                    while (!checkIdCard);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "3":
                    do {
                        let checkBirthDayTemporary="";
                        arrListCustomer[location][2]=prompt("điền vào Ngày Tháng Năm Sinh:"+checkBirthDayTemporary);
                        if(arrListCustomer[location][2].length===10 && birthDay[2]==="/" && birthDay[5]==="/") {
                            for(let i=0; i<10;i++)
                                if(i!==2 && i!==5)
                                    checkBirthDayTemporary = checkBirthDayTemporary + arrListCustomer[location][2].charAt(i);
                            checkBirthDay=kiemtraso(checkBirthDayTemporary);
                        }
                    }
                    while (!checkBirthDay);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "4":
                    do {
                        arrListCustomer[location][3]=prompt("điền vào Email:");
                        if(arrListCustomer[location][3].indexOf("@")>0 && arrListCustomer[location][3].indexOf(".")<arrListCustomer[location][3].length-1)
                            checkEmail=arrListCustomer[location][3].indexOf(".")-arrListCustomer[location][3].indexOf("@")-1;
                        else checkEmail=-1;
                    }
                    while(checkEmail<=0);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "5":
                    do {
                        arrListCustomer[location][4] = prompt("điền vào Địa Chỉ:");
                    }
                    while (arrListCustomer[location][4]==="");
                    arrListCustomer[location][4]=xuLyChuoi(arrListCustomer[location][4]);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "6":
                    do {
                        arrListCustomer[location][5] = prompt("điền vào Loại Customer:");
                    }
                    while (arrListCustomer[location][5]==="");
                    arrListCustomer[location][5]=xuLyChuoi(arrListCustomer[location][5]);
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "7":
                    do {
                        arrListCustomer[location][6]=prompt("điền vào Giảm Giá:");
                    }
                    while(!kiemtraso(arrListCustomer[location][6]));
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "8":
                    do {
                        arrListCustomer[location][7]=prompt("điền vào Số Lượng Đi Kèm:");
                    }
                    while(!kiemtraso(arrListCustomer[location][7]));
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "9":
                    do {
                        arrListCustomer[location][8]=prompt("điền vào Số Ngày thuê:");
                    }
                    while(!kiemtraso(arrListCustomer[location][8]));
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "10":
                    do {
                        arrListCustomer[location][9] = prompt("điền vào Loại Dịch Vụ:");
                    }while (arrListCustomer[location][9] ==="");
                    
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "11":
                    do {
                        arrListCustomer[location][10] = prompt("điền vào Loại Phòng Thuê:");
                    }while (arrListCustomer[location][10]==="");
                    ip = "";
                    displayInfomationCustomer(location);
                    ediwhile=0;
                    break;
                case "12":
                    ip = "";
                    ediwhile=0;
                    displayMainMenu();
                    break;
                default:
                    ip = prompt("1. Tên: " + arrListCustomer[location][0] +
                        "\n2. CMND: " + arrListCustomer[location][1] +
                        "\n3.Ngày Tháng Năm Sinh: " + arrListCustomer[location][2] +
                        "\n4.Email: " + arrListCustomer[location][3] +
                        "\n5.Địa Chỉ: " + arrListCustomer[location][4] +
                        "\n6.Loại Customer: " + arrListCustomer[location][5] +
                        "\n7.Giảm Giá: " + arrListCustomer[location][6] +
                        "\n8. Số Lượng Đi Kèm: " + arrListCustomer[location][7] +
                        "\n9. Số Ngày Thuê: " + arrListCustomer[location][8] +
                        "\n10. Loại Dịch Vụ: " + arrListCustomer[location][9] +
                        "\n11. Loại Phòng Thuê: " + arrListCustomer[location][10]+
                        "\n12. back");
            }
        }

    }
    //*************************************************menu hiển thị danh sách tên và cmnd khách hàng
    function displayCustomers() {
        let displayCustomers1;
        displayCustomers1 = prompt(chuoiHienThiTenCMND(arrListCustomer) + (arrListCustomer.length + 1) + ". back", arrListCustomer.length+1);
        if (displayCustomers1 ==arrListCustomer.length+1) {
            displayMainMenu();
        } else if (displayCustomers1 < (arrListCustomer.length+1)) {
            displayInfomationCustomer(displayCustomers1-1);
            displayMainMenu();
        }
    }
    //*********hiển thị danh sách khách hàng
    function chuoiHienThiTenCMND(arr) {
        let chuoiHienThi = "";
        for (let i = 0; i < arr.length; i++) {
            for (let j = 0; j < 2; j++) {
                if (j === 0) {
                    chuoiHienThi += (i + 1) + ". Tên: "
                }
                if (j === 1) {
                    chuoiHienThi += "  CMND: "
                }
                chuoiHienThi += arr[i][j];
            }

            if (i < arr.length) {
                chuoiHienThi += "\n";
            }
        }
        return chuoiHienThi;
    }
    //******* thông tin khách hàng
    function displayInfomationCustomer(location) {
        alert(
            "Customer số "+location+":"+
            "\n1. Tên: " +arrListCustomer[location][0]+
            "\n2. CMND: "+arrListCustomer[location][1]+
            "\n3.Ngày Tháng Năm Sinh: " +arrListCustomer[location][2]+
            "\n4.Email: "+arrListCustomer[location][3]+
            "\n5.Địa Chỉ: "+arrListCustomer[location][4]+
            "\n6.Loại Customer: "+arrListCustomer[location][5]+
            "\n7.Giảm Giá: "+arrListCustomer[location][6]+
            "\n8. Số Lượng Đi Kèm: "+arrListCustomer[location][7]+
            "\n9. Số Ngày Thuê: "+arrListCustomer[location][8]+
            "\n10. Loại Dịch Vụ: "+arrListCustomer[location][9]+
            "\n11. Loại Phòng Thuê: "+arrListCustomer[location][10]);
        displayMainMenu();
    }
    //************************************************** thêm khách hàng
    function addNewCustomer(location) {
        let checkIdCard;
        let checkBirthDayTemporary;
        let checkBirthDay;
        let checkEmail;
        arrListCustomer[location]=new Array();
        //**********************//nhập vào và xữ lý tên
        alert("Nhập Vào Customer "+(location+1)+" :")
        do {

            arrListCustomer[location][0] = prompt("điền vào Tên:");
        }
        while (arrListCustomer[location][0] === "") ;
        arrListCustomer[location][0] = xuLyChuoi(arrListCustomer[location][0]);

        //**********************//nhập vào và xử lý cmnd
        do {
            arrListCustomer[location][1] = prompt("điền vào CMND:");
            if (arrListCustomer[location][1].length === 9)
                checkIdCard = kiemtraso(arrListCustomer[location][1]);
        }
        while (!checkIdCard);
        //***************************//nhập vào và xử lý ngày tháng năm sinh
        do {
            checkBirthDayTemporary = "";
            arrListCustomer[location][2] = prompt("điền vào Ngày Tháng Năm Sinh:" + checkBirthDayTemporary);
            if (arrListCustomer[location][2].length === 10 && arrListCustomer[location][2].charAt(2) === "/" && arrListCustomer[location][2].charAt(5) === "/") {
                for (let i = 0; i < 10; i++)
                    if (i !== 2 && i !== 5)
                        checkBirthDayTemporary = checkBirthDayTemporary + arrListCustomer[location][2][i];
                checkBirthDay = kiemtraso(checkBirthDayTemporary);
            }
        }
        while (!checkBirthDay);

        //*****************************//nhập vào và xử lý email
        do {
            arrListCustomer[location][3] = prompt("điền vào Email:");
            if (arrListCustomer[location][3].indexOf("@") > 0 && arrListCustomer[location][3].indexOf(".") < arrListCustomer[location][3].length - 1)
                checkEmail = arrListCustomer[location][3].indexOf(".") - arrListCustomer[location][3].indexOf("@") - 1;
            else checkEmail = -1;
        }
        while (checkEmail <= 0);
        //***********************//nhập vào và xử lý địa chỉ
        do {
            arrListCustomer[location][4] = prompt("điền vào Địa Chỉ:");
        }
        while (arrListCustomer[location][4] === "");
        arrListCustomer[location][4] = xuLyChuoi(arrListCustomer[location][4]);
        //*************************//nhập vào và xử lý loại Customer
        do {
            arrListCustomer[location][5] = prompt("điền vào Loại Customer:");
        }
        while (arrListCustomer[location][5] === "");
        arrListCustomer[location][5] = xuLyChuoi(arrListCustomer[location][5]);
        //*****************************//nhập vào và xử lý giảm giá
        do {
            arrListCustomer[location][6] = prompt("điền vào Giảm Giá:");
        }
        while (!kiemtraso(arrListCustomer[location][6]));
        //*****************************//nhập vào và xử lý số lượng đi kèm
        do {
            arrListCustomer[location][7] = prompt("điền vào Số Lượng Đi Kèm:");
        }
        while (!kiemtraso(arrListCustomer[location][7]));
        //****************************//nhập vào và xử lý số ngày thuê
        do {
            arrListCustomer[location][8] = prompt("điền vào Số Ngày thuê:");
        }
        while (!kiemtraso(arrListCustomer[location][8]));
        //***************************//nhập vào và xử lý loại dịch vụ
        do {
            arrListCustomer[location][9] = prompt("điền vào Loại Dịch Vụ:");
        } while (!kiemtraso(arrListCustomer[location][9]));

        //***************************//nhập vào và xử lý phòng thuê
        do {
            arrListCustomer[location][10] = prompt("điền vào Loại Phòng Thuê:");
        } while (!kiemtraso(arrListCustomer[location][10]));

    }
    //******* kiểm tra dãy số
    function kiemtraso(biencankiemtra) {
        let kt;
        for (let i = 0; i < biencankiemtra.length; i++)
            if (!Number.isInteger(parseInt(biencankiemtra.charAt(i)))) {
                kt = false;
                break;
            } else kt = true;
        return kt;
    }
    //******* xử lý chuổi đổi thành viết hoa chử cái đầu, xóa dấu cách thừa...
    function xuLyChuoi(chuoi) {
        let chuoi1;
        let chuoi2 = "";
        let j;
        while (chuoi.indexOf("  ") >= 0) {
            chuoi = chuoi.replace("  ", " ");
        }
        while (chuoi[chuoi.length - 1] === " ") {
            chuoi = chuoi.substring(0, chuoi.length - 2);
        }
        chuoi = chuoi.toLowerCase();
        for (let i = -1; i < chuoi.length; i++) {
            if (chuoi[i] === " " || i === -1) {
                i++;
                chuoi1 = chuoi[i].toUpperCase();
                for (j = i; j < chuoi.length; j++)
                    if (chuoi[j] === " ") {
                        j++;
                        break;
                    }
                chuoi1 = chuoi1 + chuoi.substring(i + 1, j);
                chuoi2 = chuoi2 + chuoi1;
            }
        }
        return chuoi2;

    }


</script>


</body>
</html>